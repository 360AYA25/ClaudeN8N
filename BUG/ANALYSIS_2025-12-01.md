# Bug Analysis - 2025-12-01

## üîç What We Discovered

### n8n-mcp Zod Bug (#444, #447)

| Parameter | Value |
|-----------|-------|
| **Status** | ‚úÖ **FIXED** |
| **Fixed in** | v2.27.0 (2025-11-28) |
| **Current version** | v2.28.1 |
| **Root cause** | Zod v4 API incompatibility |
| **Solution** | Pinned MCP SDK to 1.20.1, Zod to 3.24.1 |
| **Verification** | Another bot successfully created workflow via MCP |

**GitHub Issues:**
- https://github.com/czlonkowski/n8n-mcp/issues/444 - CLOSED ‚úÖ
- https://github.com/czlonkowski/n8n-mcp/issues/447 - CLOSED ‚úÖ

---

### Claude Code MCP Inheritance Bug (#7296)

| Parameter | Value |
|-----------|-------|
| **Status** | ‚ö†Ô∏è **OPEN** (but may be partially fixed) |
| **Issue** | Task agents don't inherit MCP tools |
| **Current version** | Claude Code 2.0.55 |
| **Impact** | MCP tools not available in main orchestrator context |
| **Workaround** | Use MCP tools in custom agents (builder, researcher) |

**GitHub Issue:**
- https://github.com/anthropics/claude-code/issues/7296 - OPEN ‚ö†Ô∏è

**Note:** Despite issue being open, MCP tools ARE working in agents (confirmed by test from another bot). This suggests either:
1. Bug partially fixed in v2.0.55
2. Bug only affects certain contexts (main vs agents)

---

### Claude Code Regression Bug (#10668)

| Parameter | Value |
|-----------|-------|
| **Status** | ‚ÑπÔ∏è **CLOSED** (but unclear if fixed) |
| **Issue** | "Tools: Tool names must be unique" error |
| **Affected version** | v2.0.30 |
| **Current version** | v2.0.55 |
| **Needs** | Testing on v2.0.55 |

**GitHub Issue:**
- https://github.com/anthropics/claude-code/issues/10668 - CLOSED ‚ÑπÔ∏è

**Note:** Issue closed without clear fix confirmation. Needs verification.

---

## üß™ Tests Performed This Session

### ‚úÖ Successful Tests

1. **curl ‚Üí n8n API**: Created workflow `goLiARQcYHwyWW9V` ‚úÖ
2. **Supabase MCP**: Listed tables successfully ‚úÖ
3. **n8n-mcp version**: Confirmed 2.28.1 ‚úÖ

### ‚ùå Failed Tests

1. **MCP tools in main context**: Not available in this bot session ‚ùå
   - Tried: `mcp__n8n-mcp__n8n_create_workflow`
   - Tried: `mcp__n8n__n8n_create_workflow`
   - Result: "No such tool available"

**Reason for failure:** Session started BEFORE .mcp.json was updated. MCP server didn't reload.

---

## ‚úÖ Verification from Another Bot

**Test performed by different bot in same folder:**

```javascript
mcp__n8n-mcp__n8n_create_workflow({
  "name": "Test Workflow Simple",
  "nodes": [/* Manual Trigger + Set */],
  "connections": {/* ... */}
})
```

**Result:** ‚úÖ SUCCESS
- Workflow created: `el5UPeHP6b53Y8i7`
- No Zod errors
- All fields correct

**Conclusion:** n8n-mcp Zod bug is DEFINITELY FIXED! üéâ

---

## üìù Actions Taken

1. ‚úÖ Updated `.mcp.json`: `n8n-mcp@2.26.5` ‚Üí `n8n-mcp@latest`
2. ‚úÖ Updated `BUG/ZodBUG.md`: Status ‚Üí RESOLVED
3. ‚úÖ Updated `BUG/Monitor Claude Code Bug Fix #10668.md`: Latest check date
4. ‚è≥ Created `BUG/TASK_FOR_NEXT_BOT.md`: Full instructions for cleanup

---

## üéØ Next Steps (for new bot session)

1. **Verify MCP tools work** (create/update/delete workflows)
2. **Remove curl workaround** from builder.md, qa.md
3. **Update documentation** (.claude/CLAUDE.md, BUG files)
4. **Archive obsolete workaround docs**
5. **Commit changes** with proper message

See: [TASK_FOR_NEXT_BOT.md](TASK_FOR_NEXT_BOT.md)

---

## üìä Summary

| Bug | Status | Action Required |
|-----|--------|-----------------|
| n8n-mcp Zod (#444, #447) | ‚úÖ FIXED | Remove workaround docs |
| Claude Code #7296 | ‚ö†Ô∏è OPEN | Monitor, seems partially working |
| Claude Code #10668 | ‚ÑπÔ∏è CLOSED | Test on v2.0.55 |

**Overall:** Major blocker (Zod bug) RESOLVED! System can use MCP tools normally. üöÄ

---

**Analysis by:** Previous bot session (limited MCP access)
**Date:** 2025-12-01
**Next check:** 2025-12-08

# L-075: Anti-Hallucination Protocol

> **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –í–°–ï –∞–≥–µ–Ω—Ç—ã —Å MCP –¥–æ—Å—Ç—É–ø–æ–º
> **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û

## STEP 0: MCP Check (–ü–ï–†–í–´–ô –®–ê–ì!)

```
–ü–µ—Ä–µ–¥ –ª—é–±–æ–π —Ä–∞–±–æ—Ç–æ–π –≤—ã–∑–æ–≤–∏:
mcp__n8n-mcp__n8n_list_workflows limit=1

‚úÖ –í–∏–¥–∏—à—å –¥–∞–Ω–Ω—ã–µ ‚Üí MCP —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–¥–æ–ª–∂–∞–π
‚ùå –û—à–∏–±–∫–∞ ‚Üí –°–¢–û–ü, —Å–æ–æ–±—â–∏ "MCP unavailable"
```

## –ó–∞–ø—Ä–µ—â–µ–Ω–æ (–ù–ò–ö–û–ì–î–ê!)

| –î–µ–π—Å—Ç–≤–∏–µ | –ü–æ—á–µ–º—É –∑–∞–ø—Ä–µ—â–µ–Ω–æ |
|----------|------------------|
| –í—ã–¥—É–º—ã–≤–∞—Ç—å workflow ID | –§–µ–π–∫ - ID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç |
| "Workflow —Å–æ–∑–¥–∞–Ω" –±–µ–∑ MCP –æ—Ç–≤–µ—Ç–∞ | –õ–æ–∂—å - –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ |
| –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è |
| –ü–∏—Å–∞—Ç—å success –±–µ–∑ `<function_results>` | –û–±–º–∞–Ω |

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–í–°–ï–ì–î–ê!)

1. **–õ–æ–≥–∏—Ä—É–π mcp_calls:**
   ```json
   {
     "mcp_calls": [
       {"tool": "n8n_create_workflow", "result_id": "abc123"},
       {"tool": "n8n_get_workflow", "verified": true}
     ]
   }
   ```

2. **–¶–∏—Ç–∏—Ä—É–π —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**
   ```
   ‚úÖ "MCP –≤–µ—Ä–Ω—É–ª: {id: 'abc123', name: 'Test', nodes: [...]}"
   ‚ùå "Workflow —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω"
   ```

3. **–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–π:**
   ```
   –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí –≤—ã–∑–æ–≤–∏ n8n_get_workflow
   Workflow —Å—É—â–µ—Å—Ç–≤—É–µ—Ç? ‚Üí –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ success
   ```

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ success

- [ ] –í–∏–¥–µ–ª `<function_results>` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏?
- [ ] –ú–æ–≥—É –ø—Ä–æ—Ü–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –¢–û–ß–ù–´–ô –æ—Ç–≤–µ—Ç API?
- [ ] workflow_id –∏–∑ –æ—Ç–≤–µ—Ç–∞ API (–Ω–µ –∏–∑ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è)?
- [ ] –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª —á–µ—Ä–µ–∑ n8n_get_workflow?

**–ï—Å–ª–∏ –õ–Æ–ë–û–ô –ø—É–Ω–∫—Ç = –ù–ï–¢ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–π error, –Ω–µ success!**
